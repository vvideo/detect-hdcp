<!DOCTYPE html>
<html>
<head>
  <title>Detect HDCP</title>
  <meta charset="utf-8" />
  <style>
    html, body {
        padding: 0;
        margin: 0;
        border: 0;
        background: black;
        color: white;
    }

    .page {
        margin: 50px;
        font-size: 30px;
    }

    h1 {
        margin: 0;
        padding: 0;
    }

    .keysystem {
        margin-top: 10px;
        line-height: 2em;
    }

    .keysytem-result {
        text-wrap: pre;
    }
  </style>
</head>
<body>
    <div class="page">
        <h1>HDCP versions by key system</h1>
        <div class="keysystem">
            <div class="keysystem-label">Google Widevine</div>
            <div class="keysytem-result" id="widevine-result"></div>
        </div>
        <div class="keysystem">
            <div class="keysystem-label">Microsoft PlayReady</div>
            <div class="keysytem-result" id="playready-result"></div>
        </div>
        <div class="keysystem">
            <div class="keysystem-label">Apple FairPlay</div>
            <div class="keysytem-result" id="fairplay-result"></div>
        </div>
    </div>
    <script type="module">
        import { checkAllHdcpVersions } from './dist/index.esm.js';

        const widevineElem = document.querySelector('#widevine-result');
        const playReadyElem = document.querySelector('#playready-result');
        const fairplayElem = document.querySelector('#fairplay-result');

        checkAllHdcpVersions('com.widevine.alpha')
            .then((result) => {
                widevineElem.innerText = JSON.stringify(result, ' ', 4);
                console.log(result);
            })
            .catch((error) => {
                widevineElem.innerText = error;
                console.error(error);
            });

        checkAllHdcpVersions('com.microsoft.playready')
            .then((result) => {
                playreadyElem.innerText = JSON.stringify(result, ' ', 4);
                console.log(result);
            })
            .catch((error) => {
                playreadyElem.innerText = error;
                console.error(error);
            });

        checkAllHdcpVersions('com.apple.fps')
            .then((result) => {
                fairplayElem.innerText = JSON.stringify(result, ' ', 4);
                console.log(result);
            })
            .catch((error) => {
                fairplayElem.innerText = error;
                console.error(error);
            });
</script>
</body>
</html>
